{% extends 'base_layout.html' %}
{% load static from staticfiles %}

{% block content %}

<div class="row">
    <div class="col-3">
    <h5>Options</h5>
        <div class="options">
            <form id='genbank' method="post" enctype="multipart/form-data"> {% csrf_token %}

            <fieldset class="form-group">
                <legend>Assembly parts</legend>
                    <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col">
                        <label for="file">Combination file: </label>
                    </div>
                    <div class="col-left">
                        <input type="file" class="form-control-file border" name="myFile">
                    </div>
                    <div class="col-auto"></div>
                    </div><br>

                    <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col">
                        <label for="file">Zip file: </label>
                    </div>
                    <div class="col-left">
                        <input type="file" class="form-control-file border" name="myzipFile">
                    </div>
                    <div class="col-auto"></div>
                    </div><br>

                    <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col">
                        <label for="enzyme">Enzyme: </label>
                    </div>
                    <div class="col">
                        <select class="form-control" id="enzyme" name="enzyme">
                            <option value="BsmBI">BsmBI</option>
                            <option value="BsaI">BsaI</option>
                        </select>
                    </div>
                    <div class="col-auto"></div>
                    </div><br>

                    <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col">
                        <label for="enzyme">Topology: </label>
                    </div>
                    <div class="col">
                        <select class="form-control" id="topology" name="topology">
                            <option value="circular">Circular</option>
                            <option value="linear">Linear</option>
                        </select>
                    </div>
                    <div class="col-auto"></div>
                    </div><br>

            </fieldset>
            <input type="submit" class="btn btn-info btn-block btn-lg" value="Submit">

            </form>
            <br><br>
        </div>
      </div>

      <div class="col-6">
        <h5>DNA Cauldron Script</h5>

          {% if alerts %}
            <div class="alert">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            <ol>{% for alert in alerts %}
                    {% for num in alert %}
                        {% if num.count > 1 %} <li>{{ num }} </li>
                        {% else %} <li>{{ alert }} </li>
                        {% endif %}
                    {% endfor %}<br>
            </ol>{% endfor %}
            </div>
          {% endif %}

            Software developed at Edinburgh Genome Foundry.<br>
            Source: <a href="https://github.com/Edinburgh-Genome-Foundry/DnaCauldron">https://github.com/Edinburgh-Genome-Foundry/DnaCauldron</a>
            <br><br>

            Example of combination file (<a href="{% static 'docs/assembly_parts.txt' %}" target="_blank" download><strong> assembly_parts.txt </strong></a>)<br>
            Example of genbank zip file (<a href="{% static 'docs/gb_files.zip' %}" target="_blank" download><strong> gb_files.zip </strong></a>)<br>
      </div>


      <div class="col-3">

        {% if url_file %}
            <h5>Output </h5>
            <fieldset class="form-group">
                <legend>Files</legend>
                <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col-right" >
                        <label for="inputfile">Input file:</label>
                    </div>
                    <div class="col" >
                        <label for="inputfile_url"><a href="{{ url_file }}" target="_blank" >{{ upload }}</a></label>
                    </div>
                    <div class="col-auto"></div>
                </div>

                <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col-right" >
                        <label for="inputfile">Input zipfile:</label>
                    </div>
                    <div class="col" >
                        <label for="inputfile_url"><a href="{{ url_zip }}" target="_blank" >{{ upload_zip }}</a></label>
                    </div>
                    <div class="col-auto"></div>
                </div>

            {% if out_zip %}<br>
                <div class="form-row align-items-center">
                    <div class="col-auto"></div>
                    <div class="col-right">
                        <label for="outputfile">Assembly file:</label>
                    </div>
                    <div class="col">
                        <label for="outputfile"><a href="{{ out_zip.file.url }}" target="_blank" download> {{ out_zip.name }} </a></label>
                    </div>
                    <div class="col-auto"></div>
                </div>
            {% endif %}
            </fieldset><br>
        {% endif %}

      </div>
    </div>
{% endblock%}